Debug CrÃ­tico - Deploy de ProduÃ§Ã£o Falhando
AnÃ¡lise dos Erros
Todas as requisiÃ§Ãµes para produÃ§Ã£o retornam 500:

âŒ https://partiusaara.replit.app/ â†’ 500
âŒ https://partiusaara.replit.app/favicon.ico â†’ 500
âœ… https://28e4b557-...replit.dev/ â†’ 200 (preview funciona)

Root Cause
O servidor de PRODUÃ‡ÃƒO nÃ£o estÃ¡ iniciando ou estÃ¡ crashando imediatamente.
ğŸš¨ DiagnÃ³stico Urgente
1. Verificar Logs de ProduÃ§Ã£o no Replit
No painel do Replit:

Ir em "Deployments" (aba de deploys)
Clicar no deploy atual
Verificar "Logs" de produÃ§Ã£o
Procurar por erros de startup

2. PossÃ­veis Causas
A. DiferenÃ§a de VariÃ¡veis de Ambiente
bash# Desenvolvimento tem:
NODE_ENV=development
STRIPE_MODE=test

# ProduÃ§Ã£o pode ter:
NODE_ENV=production  
STRIPE_MODE=live
B. Banco de Dados de ProduÃ§Ã£o Diferente

Preview usa um banco
Deploy usa outro banco (com estrutura diferente?)

C. Erro no Build de ProduÃ§Ã£o

CÃ³digo nÃ£o compila para produÃ§Ã£o
DependÃªncias faltando

D. Porta/ConfiguraÃ§Ã£o de Servidor
typescript// Pode estar hardcoded para desenvolvimento
const PORT = 5000; // âŒ Fixo

// Deveria ser
const PORT = process.env.PORT || 5000; // âœ… FlexÃ­vel
ğŸ”§ AÃ§Ãµes Imediatas
1. Verificar Logs de Deploy
bash# No terminal do Replit
replit deploy --logs

# Ou via interface web
# Deployments > Current Deploy > Logs
2. Verificar VariÃ¡veis de Ambiente
No painel do Replit, verificar se estÃ£o definidas:

DATABASE_URL
STRIPE_SECRET_KEY
JWT_SECRET
NODE_ENV
PORT

3. Comparar ConfiguraÃ§Ãµes
Preview vs Deploy:
ConfiguraÃ§Ã£oPreviewDeployNode ENVdevelopmentproductionDatabasedevprodStripetestlivePort5000?
4. Verificar servidor/index.ts
Procurar por problemas de produÃ§Ã£o:
typescript// âŒ Pode estar causando erro em produÃ§Ã£o
if (process.env.NODE_ENV === 'production') {
  // ConfiguraÃ§Ãµes que podem falhar
}

// âŒ Caminhos absolutos
const path = '/home/runner/workspace/...'

// âŒ ConfiguraÃ§Ãµes hardcoded
const corsOrigins = ['http://localhost:3000']
5. Teste de Build Local
bash# Testar se compila para produÃ§Ã£o
NODE_ENV=production npm run build

# Se der erro, Ã© problema de build
ğŸ“‹ Checklist de Debugging
Verificar no Replit:

 Logs de deploy (Deployments > Logs)
 VariÃ¡veis de ambiente configuradas
 Build successful vs failed
 DiferenÃ§as de configuraÃ§Ã£o

Verificar no cÃ³digo:

 server/index.ts - configuraÃ§Ãµes de produÃ§Ã£o
 package.json - scripts de produÃ§Ã£o
 Hardcoded paths ou URLs
 Error handling em produÃ§Ã£o

ğŸ¯ InstruÃ§Ãµes para IA

Acessar os logs de deploy no painel do Replit
Identificar erro especÃ­fico de startup
Verificar se variÃ¡veis de ambiente estÃ£o configuradas
Comparar configuraÃ§Ãµes de dev vs prod
Reportar erro exato encontrado nos logs

Resultado Esperado

ğŸ“‹ Erro especÃ­fico identificado nos logs
ğŸ”§ Causa raiz do problema de deploy
âœ… CorreÃ§Ã£o direcionada para fazer produÃ§Ã£o funcionar

âš ï¸ Importante
Este Ã© um problema de deploy/infraestrutura, nÃ£o do cÃ³digo de autenticaÃ§Ã£o que modificamos.