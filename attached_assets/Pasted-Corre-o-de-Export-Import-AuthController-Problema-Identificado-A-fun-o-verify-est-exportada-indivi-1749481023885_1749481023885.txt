CorreÃ§Ã£o de Export/Import AuthController
Problema Identificado
A funÃ§Ã£o verify estÃ¡ exportada individualmente (export async function verify), mas o routes.ts estÃ¡ importando como namespace (import * as AuthController) e tentando acessar como AuthController.verify.
DiagnÃ³stico Completo
bashâœ… Arquivo existe: server/controllers/auth.controller.ts
âœ… FunÃ§Ã£o implementada: export async function verify
âŒ Export/Import incompatÃ­vel: namespace vs named export
SoluÃ§Ãµes PossÃ­veis
OPÃ‡ÃƒO 1: Padronizar Export Individual (Recomendado)
Modificar routes.ts:
typescript// ANTES (PROBLEMÃTICO)
import * as AuthController from "./controllers/auth.controller";
app.get('/api/auth/verify', authMiddleware, AuthController.verify);

// DEPOIS (CORRETO)
import { verify } from "./controllers/auth.controller";
app.get('/api/auth/verify', authMiddleware, verify);
OPÃ‡ÃƒO 2: Padronizar Export de Objeto
Modificar auth.controller.ts:
typescript// No final do arquivo, adicionar:
export const AuthController = {
  login,
  register,
  logout,
  getCurrentUser,
  verify
  // ... outras funÃ§Ãµes
};

// E manter os exports individuais para compatibilidade:
export { login, register, logout, getCurrentUser, verify };
OPÃ‡ÃƒO 3: CorreÃ§Ã£o MÃ­nima (Mais Segura)
Verificar se outras funÃ§Ãµes tÃªm o mesmo problema:
bashgrep -E "AuthController\.(login|register|logout|getCurrentUser)" server/routes.ts
Se outras funÃ§Ãµes funcionam, o problema pode ser especÃ­fico da funÃ§Ã£o verify.
Prompt para IA do Replit
DiagnÃ³stico Adicional:
DIAGNÃ“STICO: Verificar consistÃªncia de exports

COMANDOS:
1. grep -E "export.*function" server/controllers/auth.controller.ts | head -5
2. grep -E "AuthController\." server/routes.ts | head -5

OBJETIVO: Verificar se outras funÃ§Ãµes tÃªm mesmo padrÃ£o de export/import
CorreÃ§Ã£o Segura:
CORREÃ‡ÃƒO: Export/Import incompatÃ­vel em auth.controller.ts

PROBLEMA: Function verify exportada individualmente mas importada como namespace

LOCALIZAR: server/routes.ts linha com AuthController.verify

SUBSTITUIR:
import * as AuthController from "./controllers/auth.controller";
// ... outras linhas ...
app.get('/api/auth/verify', authMiddleware, AuthController.verify);

POR:
import * as AuthController from "./controllers/auth.controller";
import { verify } from "./controllers/auth.controller";
// ... outras linhas ...
app.get('/api/auth/verify', authMiddleware, verify);

TESTE: Deploy deve funcionar apÃ³s esta mudanÃ§a
VerificaÃ§Ã£o de ConsistÃªncia:
VERIFICAR: PadrÃ£o de exports em auth.controller.ts

SE todas funÃ§Ãµes usam "export async function":
- Modificar routes.ts para imports individuais

SE algumas funÃ§Ãµes usam padrÃ£o diferente:
- Padronizar todas para mesmo formato

OBJETIVO: ConsistÃªncia de export/import em todo controller
ValidaÃ§Ã£o da CorreÃ§Ã£o
ApÃ³s implementar a correÃ§Ã£o:

Comando de teste:
bashNODE_ENV=production timeout 5s node dist/index.js 2>&1 | head -10

Deploy deve funcionar:
https://partiusaara.replit.app/ â†’ Status 200 âœ…

Endpoint deve responder:
GET /api/auth/verify â†’ Retorna dados do usuÃ¡rio


ObservaÃ§Ãµes

ğŸ¯ Problema especÃ­fico: export/import mismatch
âœ… FunÃ§Ã£o implementada corretamente
ğŸ”§ CorreÃ§Ã£o simples no import
ğŸš€ Deploy funcionarÃ¡ apÃ³s correÃ§Ã£o

PRIORIDADE: Corrigir import para resolver erro 500 no deploy.