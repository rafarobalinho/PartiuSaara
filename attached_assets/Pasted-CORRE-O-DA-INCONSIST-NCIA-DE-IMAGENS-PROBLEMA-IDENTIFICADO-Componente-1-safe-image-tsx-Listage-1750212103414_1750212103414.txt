CORRE√á√ÉO DA INCONSIST√äNCIA DE IMAGENS
üî¥ PROBLEMA IDENTIFICADO
Componente 1: safe-image.tsx (Listagem)

Usa: /api/products/5/primary-image
Resultado: Imagem errada
Usado em: P√°gina de listagem /products

Componente 2: image-component.tsx (Detalhes)

Usa: /uploads/stores/2/products/5/1746471716813-235830187.jpg
Resultado: Imagem correta ‚úÖ
Usado em: P√°gina de detalhes /products/5

SOLU√á√ÉO: Padronizar para URL Direta
1Ô∏è‚É£ Corrigir safe-image.tsx
Arquivo: client/src/components/ui/safe-image.tsx
Modificar para usar URL direta como image-component.tsx:
typescript// Em vez de usar API endpoint:
// src="/api/products/5/primary-image"

// Usar URL direta (como image-component.tsx):
// src="/uploads/stores/2/products/5/1746471716813-235830187.jpg"

// O componente deve receber a URL da imagem diretamente dos dados do produto
2Ô∏è‚É£ Verificar Fonte dos Dados
Onde a p√°gina /products busca dados dos produtos?
O JSON deve incluir a URL completa da imagem:
javascript// ‚úÖ Dados corretos que devem vir da API:
{
  id: 5,
  name: "√ìculos Escuros - Linha Bronze",
  primary_image: "/uploads/stores/2/products/5/1746471716813-235830187.jpg", // URL direta
  // ou
  images: [
    {
      url: "/uploads/stores/2/products/5/1746471716813-235830187.jpg",
      is_primary: true
    }
  ]
}
3Ô∏è‚É£ Corrigir API de Listagem de Produtos
Se a API /api/products n√£o est√° retornando as URLs corretas:
sql-- Query deve incluir as URLs das imagens:
SELECT 
  p.id,
  p.name,
  p.description,
  pi.image_url as primary_image,
  pi.thumbnail_url
FROM products p
LEFT JOIN product_images pi ON p.id = pi.product_id AND pi.is_primary = true
4Ô∏è‚É£ Alternativa: Corrigir a API de Imagem
Se preferir manter /api/products/5/primary-image, corrigir o endpoint:
Arquivo: server/controllers/image.controller.js
Garantir que retorna a imagem correta para cada produto.
Decis√£o de Arquitetura
Op√ß√£o A: URL Direta (Recomendada)

‚úÖ Mais r√°pido (sem redirect)
‚úÖ Funciona (como na p√°gina de detalhes)
‚úÖ Menos requisi√ß√µes ao servidor

Op√ß√£o B: API Endpoint

‚ùå Mais lento (redirect)
‚ùå Atualmente com bug
‚ùå Mais complexo

A√ß√£o Imediata

üî¥ VERIFICAR como image-component.tsx obt√©m a URL correta
üî¥ REPLICAR a mesma l√≥gica em safe-image.tsx
üî¥ GARANTIR que API /api/products retorna URLs de imagem
üî¥ TESTAR se listagem mostra imagens corretas

A solu√ß√£o √© padronizar ambos os componentes para usar URLs diretas como o que funciona!