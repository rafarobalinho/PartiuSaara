
> rest-express@1.0.0 predev
> node server/scripts/check-port.js


> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Schema de valida√ß√£o de promo√ß√£o: ZodObject {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    shape: [Function: shape],
    unknownKeys: 'strip',
    catchall: ZodNever {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    typeName: 'ZodObject'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] },
  _cached: null,
  nonstrict: [Function: passthrough],
  augment: [Function: extend]
}
Stripe Controller: Inicializando...
STRIPE_MODE configurado: (n√£o definido)
Modo atual: PRODU√á√ÉO
Chave Stripe configurada: N√£o
FRONTEND_URL configurado: (n√£o definido)
ALERTA: Chave Stripe LIVE n√£o est√° definida no ambiente!
Erro ao inicializar o Stripe: Error: Chave do Stripe n√£o configurada
    at <anonymous> (/home/runner/workspace/server/controllers/stripe.controller.ts:31:11)
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)
[Server] Inicializando no ambiente: Desenvolvimento
[Server] CORS configurado para origens: http://localhost:5000, http://localhost:3000, https://*.replit.dev, https://*.replit.co
[CSP] Pol√≠tica de seguran√ßa de conte√∫do configurada com suporte abrangente para recursos externos
[Auth Setup] Ambiente: Desenvolvimento
[Auth Setup] Dom√≠nio de cookies: Padr√£o (n√£o definido)
[Auth Setup] Middleware de sess√£o configurado com sucesso
üîç Verificando diret√≥rios de uploads...
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads/thumbnails
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads/originals
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/assets
‚úÖ Todos os diret√≥rios verificados e criados com sucesso
Inicializando tabelas personalizadas...
‚úÖ Tabela store_place_details criada ou verificada com sucesso
‚úÖ Colunas adicionais verificadas/adicionadas na tabela store_place_details
‚úÖ Tabelas personalizadas inicializadas com sucesso
7:09:31 PM [express] ‚úÖ Tabelas personalizadas inicializadas com sucesso
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:5000
    at Server.setupListenHandle [as _listen2] (node:net:1908:16)
    at listenInCluster (node:net:1965:12)
    at doListen (node:net:2139:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1944:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 5000
}

Node.js v20.18.1
