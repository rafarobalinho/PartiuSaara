
> rest-express@1.0.0 predev
> bash scripts/sync-env.sh && bash scripts/detect-url.sh && bash scripts/detect-stripe-mode.sh && node server/scripts/check-port.js

Ambiente Replit detectado
Atualizando .env com as vari√°veis do Replit...
Sincroniza√ß√£o conclu√≠da!
‚úÖ NEXT_PUBLIC_APP_URL atualizada para: https://partiusaara.replit.app
‚úÖ STRIPE_MODE configurado para: live
üîë Usando chave: STRIPE_SECRET_KEY

> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Schema de valida√ß√£o de promo√ß√£o: ZodObject {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    shape: [Function: shape],
    unknownKeys: 'strip',
    catchall: ZodNever {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    typeName: 'ZodObject'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] },
  _cached: null,
  nonstrict: [Function: passthrough],
  augment: [Function: extend]
}
Stripe Controller: Inicializando...
STRIPE_MODE configurado: (n√£o definido)
Modo atual: PRODU√á√ÉO
Chave Stripe configurada: N√£o
FRONTEND_URL configurado: (n√£o definido)
ALERTA: Chave Stripe LIVE n√£o est√° definida no ambiente!
Erro ao inicializar o Stripe: Error: Chave do Stripe n√£o configurada
    at <anonymous> (/home/runner/workspace/server/controllers/stripe.controller.ts:31:11)
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)
[Server] Inicializando no ambiente: Desenvolvimento
[Server] CORS configurado para origens: http://localhost:5000, http://localhost:3000, https://*.replit.dev, https://*.replit.co
[CSP] Pol√≠tica de seguran√ßa de conte√∫do configurada com suporte abrangente para recursos externos
[Auth Setup] Ambiente: Desenvolvimento
[Auth Setup] Dom√≠nio de cookies: Padr√£o (n√£o definido)
[Auth Setup] Middleware de sess√£o configurado com sucesso
üîç Verificando diret√≥rios de uploads...
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads/thumbnails
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/uploads/originals
‚úÖ Permiss√µes corretas para o diret√≥rio: /home/runner/workspace/public/assets
‚úÖ Todos os diret√≥rios verificados e criados com sucesso
Inicializando tabelas personalizadas...
‚úÖ Tabela store_place_details criada ou verificada com sucesso
‚úÖ Colunas adicionais verificadas/adicionadas na tabela store_place_details
‚úÖ Tabelas personalizadas inicializadas com sucesso
4:03:06 PM [express] ‚úÖ Tabelas personalizadas inicializadas com sucesso
4:03:06 PM [express] serving on port 5000
Error:   Failed to scan for dependencies from entries:
  /home/runner/workspace/client/index.html

  ‚úò [ERROR] No matching export in "client/src/components/ui/stripe-mode.tsx" for import "default"

    client/src/App.tsx:8:7:
      8 ‚îÇ import StripeMode from "@/components/ui/stripe-mode";
        ‚ïµ        ~~~~~~~~~~


    at failureErrorWithLog (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:1472:15)
    at /home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:945:25
    at runOnEndCallbacks (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:1315:45)
    at buildResponseToResult (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:943:7)
    at /home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:955:9
    at new Promise (<anonymous>)
    at requestCallbacks.on-end (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:954:54)
    at handleRequest (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:647:17)
    at handleIncomingPacket (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:672:7)
    at Socket.readFromStdout (/home/runner/workspace/node_modules/vite/node_modules/esbuild/lib/main.js:600:7)
