Debug Espec√≠fico - Configura√ß√µes de Produ√ß√£o
Comandos de Debug para Terminal Replit
1. Verificar Configura√ß√£o CORS
bashgrep -A 10 -B 2 "cors(" server/index.ts
2. Verificar Configura√ß√£o de Porta
bashgrep -A 5 -B 5 "listen\|PORT" server/index.ts
3. Verificar Configura√ß√µes de Produ√ß√£o
bashgrep -A 5 -B 5 "isProduction" server/index.ts
4. Verificar Vari√°veis de Ambiente
bash# Verificar quais vari√°veis est√£o sendo usadas
grep -r "process\.env\." server/ | head -20
5. Verificar se h√° Erros no Package.json
bashcat package.json | grep -A 5 -B 5 "scripts"
6. Testar Build de Produ√ß√£o Localmente
bashNODE_ENV=production npm run build
echo "Exit code: $?"
7. Verificar Depend√™ncias
bashnpm list --production --depth=0 2>&1 | grep -E "(missing|UNMET|ERROR)"
Poss√≠veis Problemas Identificados
A. CORS Muito Restritivo em Produ√ß√£o
typescript// Se CORS estiver assim:
app.use(cors({
  origin: process.env.NODE_ENV === 'production' 
    ? 'https://specific-domain.com'  // ‚ùå Pode estar errado
    : 'http://localhost:3000'
}));
B. Porta Hardcoded
typescript// Problem√°tico:
app.listen(5000); // ‚ùå Fixo

// Correto:
app.listen(process.env.PORT || 5000); // ‚úÖ Flex√≠vel
C. Vari√°veis de Ambiente Faltando
bash# Verificar se est√£o definidas no Replit:
DATABASE_URL=?
STRIPE_SECRET_KEY=?
JWT_SECRET=?
FRONTEND_URL=?
üîß Comandos para Executar
Execute estes comandos UM POR VEZ e envie os resultados:
bash# 1. CORS config
grep -A 10 -B 2 "cors(" server/index.ts

# 2. Porta config  
grep -A 5 -B 5 "listen\|PORT" server/index.ts

# 3. Produ√ß√£o config
grep -A 10 -B 5 "isProduction" server/index.ts

# 4. Vari√°veis cr√≠ticas
grep -E "(DATABASE_URL|STRIPE|JWT_SECRET)" server/

# 5. Package scripts
cat package.json | grep -A 10 "scripts"
Verifica√ß√£o de Deploy
No Painel Web do Replit:

Ir em "Deployments" (aba lateral)
Clicar no deploy ativo
Verificar "Build Log"
Verificar "Runtime Log"
Capturar screenshot dos erros

Vari√°veis de Ambiente:

Settings > Environment Variables
Verificar se est√£o definidas:

DATABASE_URL
STRIPE_SECRET_KEY
JWT_SECRET
NODE_ENV
PORT



üéØ Objetivo
Identificar exatamente qual configura√ß√£o est√° causando o erro 500 em produ√ß√£o.
Instru√ß√µes
Execute os comandos acima e me envie os resultados para identificarmos o problema espec√≠fico.